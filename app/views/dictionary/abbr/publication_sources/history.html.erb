<div class="dictionary-container">
  <header>
    <nav><%= link_to "← Back to #{@record.abbr_name}", abbr_publication_source_path(@record) %></nav>
    <h1>Revision History: <%= @record.abbr_name %></h1>
    <p class="text-muted">Root ID: <code><%= @record.root_id || @record.id %></code></p>
  </header>

  <div class="history-timeline">
    <table class="dic-table">
      <thead>
      <tr>
        <th>Ver.</th>
        <th>Status</th>
        <th>Modified Date</th>
        <th>Comment</th>
        <th>Actions</th>
      </tr>
      </thead>
      <tbody>
      <% @versions.each do |v| %>
        <tr class="<%= 'current-version' if v.is_current %>">
          <td><strong>v<%= v.version %></strong></td>
          <td>
            <% if v.is_current %>
              <span class="badge badge-success">Current</span>
            <% else %>
              <span class="badge badge-dim">Superseded</span>
            <% end %>
          </td>
          <td><%= l(v.created_at, format: :short) %></td>
          <td><%= v.revision_comment.presence || "—" %></td>
          <td>
            <%= link_to "View this version", abbr_publication_source_path(v), class: "text-link" %>
          </td>
        </tr>
      <% end %>
      </tbody>
    </table>
  </div>
</div>

